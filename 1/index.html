<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  
  <title data-lang="home_page-title">Multilingual site</title>
</head>

<body>
  <header class="header">

        <div class="container" style="float: left; width: 640px; height: 210px;">

          <p class="multi__text" data-lang="home_page-0">
            Первый блок на стартовой странице
          </p>

        </div>

        <div class="container" style="float: right; width: 300px; height: 100px;">
          <button class="header__btn" data-btn="es">Es</button>
          <button class="header__btn" data-btn="ru">Ru</button>
          <button class="header__btn" data-btn="en">En</button>
        </div>
      </div>
    </div>

  </header>

  <main class="multi">
    <div class="container">
      <p class="multi__text" data-lang="home_page-1">
        Первый блок на стартовой странице
      </p>
      <p class="multi__text" data-lang="home_page-2">
        Второй блок на стартовой странице
      </p>
      <p class="multi__text" data-lang="home_page-3">
        Третий блок на стартовой странице
      </p>
      <a href="another_page.html" class="multi__link" data-lang="home_page-4">
        Блок-ссылка на вторую страницу
      </a>
    </div>
  </main>

  
</body>

</html>


<script>
const langButtons = document.querySelectorAll("[data-btn]");
const allLangs = ["es", "ru", "en"];
const currentPathName = window.location.pathname;
let currentLang =
  localStorage.getItem("language") || checkBrowserLang() || "es";
let currentTexts = {};

const homeTexts = {
  "home_page-0": {
    es: "La página prima",
    ru: "Первая страница",
    en: "Homepage"
  },
  "home_page-1": {
    es: "La primera sección de la página prima",
    ru: "Первый раздел первой страницы",
    en: "The first section on the homepage"
  },
  "home_page-2": {
    es: "La segunda sección de la página prima",
    ru: "Второй раздел первой страницы",
    en: "The second section on the homepage"
  },
  "home_page-3": {
    es: "La tercera sección de la página prima",
    ru: "Третий раздел первой страницы",
    en: "The tird section on the homepage"
  },
  "home_page-4": {
    es: "Ir a la segunda página",
    ru: "Переход на вторую страницу",
    en: "Go to second page"
  }
};

// Проверка пути страницы сайта
function checkPagePathName() {
  switch (currentPathName) {
    case "/index.html":
      currentTexts = homeTexts;
      break;
    case "/another_page.html":
      currentTexts = anotherTexts;
      break;

    default:
      currentTexts = homeTexts;
      break;
  }
}
checkPagePathName();

// Изменение языка у текстов
function changeLang() {
  for (const key in currentTexts) {
    let elem = document.querySelector(`[data-lang=${key}]`);
    if (elem) {
      elem.textContent = currentTexts[key][currentLang];
    }
  }
}
changeLang();

// Подключаем обработчики на каждую кнопку
langButtons.forEach((btn) => {
  btn.addEventListener("click", (event) => {
    if (!event.target.classList.contains("header__btn_active")) {
      currentLang = event.target.dataset.btn;
      localStorage.setItem("language", event.target.dataset.btn);
      resetActiveClass(langButtons, "header__btn_active");
      btn.classList.add("header__btn_active");
      changeLang();
    }
  });
});

// Сброс активного класса у переданного массива элементов
function resetActiveClass(arr, activeClass) {
  arr.forEach((elem) => {
    elem.classList.remove(activeClass);
  });
}

// Проверка активной кнопки
function checkActiveLangButton() {
  switch (currentLang) {
    case "es":
      document
        .querySelector('[data-btn="es"]')
        .classList.add("header__btn_active");
      break;
    case "ru":
      document
        .querySelector('[data-btn="ru"]')
        .classList.add("header__btn_active");
      break;
    case "en":
      document
        .querySelector('[data-btn="en"]')
        .classList.add("header__btn_active");
      break;
    default:
      document
        .querySelector('[data-btn="es"]')
        .classList.add("header__btn_active");
      break;
  }
}
checkActiveLangButton();

// Проверка языка браузера
function checkBrowserLang() {
  const navLang = navigator.language.slice(0, 2).toLowerCase();
  const result = allLangs.some((elem) => {
    return elem === navLang;
  });
  if (result) {
    return navLang;
  }
}

console.log("navigator.language", checkBrowserLang());
</script>
